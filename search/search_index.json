{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Scrapper","text":"<p>Scrapper is a web scraper tool designed to download web pages and extract articles in a structured format. The application combines functionality from several open-source projects to provide an effective solution for web content extraction.</p>"},{"location":"#quick-start","title":"Quick start","text":"<p>Start a Scrapper instance with:</p> <pre><code>docker run -d -p 3000:3000 --name scrapper amerkurev/scrapper:latest\n</code></pre> <p>Scrapper will be available at http://localhost:3000/. For more details, see Usage</p>"},{"location":"#demo","title":"Demo","text":"<p>Watch a 30-second demo reel showcasing the web interface of Scrapper.</p> <p>https://user-images.githubusercontent.com/28217522/225941167-633576fa-c9e2-4c63-b1fd-879be2d137fa.mp4</p>"},{"location":"#features","title":"Features","text":"<p>Scrapper provides the following features:</p> <ul> <li>Built-in headless browser - Integrates with Playwright to handle JavaScript-heavy websites, cookie consent forms, and other interactive elements.</li> <li>Read mode parsing - Uses Mozilla\u2019s Readability.js library to extract article content similar to browser \u201cReader View\u201d functionality.</li> <li>Web interface - Provides a user-friendly interface for debugging queries and experimenting with parameters. Built with the Pico CSS framework with dark theme support.</li> <li>Simple REST API - Features a straightforward API requiring minimal parameters for integration.</li> <li>News link extraction - Identifies and extracts links to news articles from website main pages.</li> </ul> <p>Additional capabilities include:</p> <ul> <li>Result caching - Caches parsing results to disk for faster retrieval.</li> <li>Page screenshots - Captures visual representation of pages as seen by the parser.</li> <li>Session management - Configurable incognito mode or persistent sessions.</li> <li>Proxy support - Compatible with HTTP, SOCKS4, and SOCKS5 proxies.</li> <li>Customization options - Control for HTTP headers, viewport settings, Readability parser parameters, and more.</li> <li>Docker delivery - Packaged as a Docker image for simple deployment.</li> <li>Open-source license - Available under MIT license.</li> </ul>"},{"location":"#usage","title":"Usage","text":""},{"location":"#getting-scrapper","title":"Getting Scrapper","text":"<p>The Scrapper Docker image includes Playwright and all necessary browser dependencies, resulting in an image size of approximately 2 GB. Ensure sufficient disk space is available, particularly if storing screenshots.</p> <p>To download the latest version:</p> <pre><code>docker pull amerkurev/scrapper:latest\n</code></pre>"},{"location":"#creating-directories","title":"Creating directories","text":"<p>Scrapper requires two directories: 1. <code>user_data</code>: Stores browser session data and caches parsing results 2. <code>user_scripts</code>: Contains custom JavaScript scripts that can be injected into pages</p> <p>Scrapper runs under UID <code>1001</code> rather than root. Set appropriate permissions on mounted directories:</p> <pre><code>mkdir -p user_data user_scripts\nchown 1001:1001 user_data/ user_scripts/\nls -l\n</code></pre> <p>The output should show:</p> <pre><code>drwxr-xr-x 2 1001 1001 4096 Mar 17 23:23 user_data\ndrwxr-xr-x 2 1001 1001 4096 Mar 17 23:23 user_scripts\n</code></pre> <p>Important note for macOS users</p> <p>If you\u2019re running Scrapper on macOS, do not set ownership to UID 1001:1001 for the directories. Simply create the folders and Scrapper will work with your current user permissions:</p> <p><code>console mkdir -p user_data user_scripts</code></p> <p>Setting <code>chown 1001:1001</code> on macOS will prevent Scrapper from writing to these directories!</p>"},{"location":"#managing-scrapper-cache","title":"Managing Scrapper Cache","text":"<p>The Scrapper cache is stored in the <code>user_data/_res</code> directory. For automated cache management, configure periodic cleanup:</p> <pre><code>find /path/to/user_data/_res -ctime +7 -delete\n</code></pre> <p>This example deletes cache files older than 7 days.</p>"},{"location":"#using-scrapper","title":"Using Scrapper","text":"<p>After preparing directories, run Scrapper:</p> <pre><code>docker run -d -p 3000:3000 -v $(pwd)/user_data:/home/pwuser/user_data -v $(pwd)/user_scripts:/home/pwuser/user_scripts --name scrapper amerkurev/scrapper:latest\n</code></pre> <p>Access the web interface at http://localhost:3000/</p> <p>Monitor logs with:</p> <pre><code>docker logs -f scrapper\n</code></pre>"},{"location":"#configuration-options","title":"Configuration Options","text":"<p>Scrapper can be configured using environment variables. You can set these either directly when running the container or through an environment file passed with <code>--env-file=.env</code>.</p> Environment Variable Description Default HOST Interface address to bind the server to 0.0.0.0 PORT Web interface port number 3000 LOG_LEVEL Logging detail level (debug, info, warning, error, critical) info BASIC_HTPASSWD Path to the htpasswd file for basic authentication /.htpasswd BROWSER_TYPE Browser type to use (chromium, firefox, webkit) chromium BROWSER_CONTEXT_LIMIT Maximum number of browser contexts (tabs) 20 SCREENSHOT_TYPE Screenshot type (jpeg or png) jpeg SCREENSHOT_QUALITY Screenshot quality (0-100) 80 UVICORN_WORKERS Number of web server worker processes 2 DEBUG Enable debug mode false"},{"location":"#example-env-file","title":"Example .env file","text":"<pre><code>LOG_LEVEL=error\nBROWSER_TYPE=firefox\nSCREENSHOT_TYPE=jpeg\nSCREENSHOT_QUALITY=90\nUVICORN_WORKERS=4\nDEBUG=false\n</code></pre> <p>To use an environment file with Docker, include it when running the container:</p> <pre><code>docker run -d --name scrapper --env-file=.env -v $(pwd)/user_data:/home/pwuser/user_data -v $(pwd)/user_scripts:/home/pwuser/user_scripts -p 3000:3000 amerkurev/scrapper:latest\n</code></pre>"},{"location":"#basic-authentication","title":"Basic Authentication","text":"<p>Scrapper supports HTTP basic authentication to secure access to the web interface. Follow these steps to enable it:</p> <ol> <li>Create an htpasswd file with bcrypt-encrypted passwords:</li> </ol> <pre><code>htpasswd -cbB .htpasswd admin yourpassword\n</code></pre> <p>Add additional users with:</p> <pre><code>htpasswd -bB .htpasswd another_user anotherpassword\n</code></pre> <ol> <li>Mount the htpasswd file when running Scrapper:</li> </ol> <pre><code>docker run -d --name scrapper \\\n    -v $(pwd)/user_data:/home/pwuser/user_data \\\n    -v $(pwd)/user_scripts:/home/pwuser/user_scripts \\\n    -v $(pwd)/.htpasswd:/.htpasswd \\\n    -p 3000:3000 \\\n    amerkurev/scrapper:latest\n</code></pre> <ol> <li>If you want to use a custom path for the htpasswd file, specify it with the <code>BASIC_HTPASSWD</code> environment variable:</li> </ol> <pre><code>docker run -d --name scrapper \\\n    -v $(pwd)/user_data:/home/pwuser/user_data \\\n    -v $(pwd)/user_scripts:/home/pwuser/user_scripts \\\n    -v $(pwd)/custom/path/.htpasswd:/auth/.htpasswd \\\n    -e BASIC_HTPASSWD=/auth/.htpasswd \\\n    -p 3000:3000 \\\n    amerkurev/scrapper:latest\n</code></pre> <p>Authentication will be required for all requests to Scrapper once enabled.</p>"},{"location":"#https-support","title":"HTTPS Support","text":"<p>Scrapper supports HTTPS connections with SSL certificates for secure access to the web interface. Follow these steps to enable it:</p> <ol> <li>Prepare your SSL certificate and key files:</li> </ol> <pre><code># Example of generating a self-signed certificate (for testing only)\nopenssl req -x509 -newkey rsa:4096 -nodes -keyout key.pem -out cert.pem -days 365 -subj '/CN=localhost'\n</code></pre> <ol> <li>Mount the SSL files when running Scrapper:</li> </ol> <pre><code>docker run -d --name scrapper \\\n    -v $(pwd)/user_data:/home/pwuser/user_data \\\n    -v $(pwd)/user_scripts:/home/pwuser/user_scripts \\\n    -v $(pwd)/cert.pem:/.ssl/cert.pem \\\n    -v $(pwd)/key.pem:/.ssl/key.pem \\\n    -p 3000:3000 \\\n    amerkurev/scrapper:latest\n</code></pre> <p>When SSL certificates are detected, Scrapper automatically enables HTTPS mode. You can then access the secure interface at https://localhost:3000/.</p> <p>For production use, always use properly signed certificates from a trusted certificate authority.</p>"},{"location":"#api-reference","title":"API Reference","text":""},{"location":"#get-apiarticleurl","title":"GET /api/article?url=\u2026","text":"<p>The Scrapper API provides a straightforward interface accessible through a single endpoint:</p> <pre><code>curl -X GET \"localhost:3000/api/article?url=https://en.wikipedia.org/wiki/web_scraping\"\n</code></pre> <p>Use the GET method on the <code>/api/article</code> endpoint with the required <code>url</code> parameter specifying the target webpage. Scrapper will load the page in a browser, extract the article text, and return it in JSON format.</p> <p>All other parameters are optional with default values. The web interface provides a visual query builder to assist with parameter configuration.</p>"},{"location":"#request-parameters","title":"Request Parameters","text":""},{"location":"#scrapper-settings","title":"Scrapper settings","text":"Parameter Description Default <code>url</code> Page URL. The page should contain the text of the article that needs to be extracted. <code>cache</code> All scraping results are always saved to disk. This parameter determines whether to retrieve results from cache or execute a new request. When set to true, existing cached results will be returned if available. By default, cache reading is disabled, so each request is processed anew. <code>false</code> <code>full-content</code> If this option is set to true, the result will have the full HTML contents of the page (<code>fullContent</code> field in the response). <code>false</code> <code>screenshot</code> If this option is set to true, the result will have the link to the screenshot of the page (<code>screenshot</code> field in the response). Scrapper initially attempts to take a screenshot of the entire scrollable page. If it fails because the image is too large, it will only capture the currently visible viewport. <code>false</code> <code>user-scripts</code> To use your JavaScript scripts on a webpage, put your script files into the <code>user_scripts</code> directory. Then, list the scripts you need in the <code>user-scripts</code> parameter, separating them with commas. These scripts will run after the page loads but before the article parser starts. This means you can use these scripts to do things like remove ad blocks or automatically click the cookie acceptance button. Keep in mind, script names cannot include commas, as they are used for separation.For example, you might pass <code>remove-ads.js, click-cookie-accept-button.js</code>.If you plan to run asynchronous long-running scripts, check <code>user-scripts-timeout</code> parameter. <code>user-scripts-timeout</code> Waits for the given timeout in milliseconds after users scripts injection. For example if you want to navigate through page to specific content, set a longer period (higher value). The default value is 0, which means no sleep. <code>0</code>"},{"location":"#browser-settings","title":"Browser settings","text":"Parameter Description Default <code>incognito</code> Allows creating <code>incognito</code> browser contexts. Incognito browser contexts don\u2019t write any browsing data to disk. <code>true</code> <code>timeout</code> Maximum operation time to navigate to the page in milliseconds; defaults to 60000 (60 seconds). Pass 0 to disable the timeout. <code>60000</code> <code>wait-until</code> When to consider navigation succeeded, defaults to <code>domcontentloaded</code>. Events can be either:<code>load</code> - consider operation to be finished when the <code>load</code> event is fired.<code>domcontentloaded</code> - consider operation to be finished when the DOMContentLoaded event is fired.<code>networkidle</code> - consider operation to be finished when there are no network connections for at least 500 ms.<code>commit</code> - consider operation to be finished when network response is received and the document started loading. <code>domcontentloaded</code> <code>sleep</code> Waits for the given timeout in milliseconds before parsing the article, and after the page has loaded. In many cases, a sleep timeout is not necessary. However, for some websites, it can be quite useful. Other waiting mechanisms, such as waiting for selector visibility, are not currently supported. The default value is 0, which means no sleep. <code>0</code> <code>resource</code> List of resource types allowed to be loaded on the page. All other resources will not be allowed, and their network requests will be aborted. By default, all resource types are allowed. The following resource types are supported: <code>document</code>, <code>stylesheet</code>, <code>image</code>, <code>media</code>, <code>font</code>, <code>script</code>, <code>texttrack</code>, <code>xhr</code>, <code>fetch</code>, <code>eventsource</code>, <code>websocket</code>, <code>manifest</code>, <code>other</code>. Example: <code>document,stylesheet,fetch</code>. <code>viewport-width</code> The viewport width in pixels. It\u2019s better to use the <code>device</code> parameter instead of specifying it explicitly. <code>viewport-height</code> The viewport height in pixels. It\u2019s better to use the <code>device</code> parameter instead of specifying it explicitly. <code>screen-width</code> The page width in pixels. Emulates consistent window screen size available inside web page via window.screen. Is only used when the viewport is set. <code>screen-height</code> The page height in pixels. <code>device</code> Simulates browser behavior for a specific device, such as user agent, screen size, viewport, and whether it has touch enabled.Individual parameters like <code>user-agent</code>, <code>viewport-width</code>, and <code>viewport-height</code> can also be used; in such cases, they will override the <code>device</code> settings.List of available devices. <code>Desktop Chrome</code> <code>scroll-down</code> Scroll down the page by a specified number of pixels. This is particularly useful when dealing with lazy-loading pages (pages that are loaded only as you scroll down). This parameter is used in conjunction with the <code>sleep</code> parameter. Make sure to set a positive value for the <code>sleep</code> parameter, otherwise, the scroll function won\u2019t work. <code>0</code> <code>ignore-https-errors</code> Whether to ignore HTTPS errors when sending network requests. The default setting is to ignore HTTPS errors. <code>true</code> <code>user-agent</code> Specific user agent. It\u2019s better to use the <code>device</code> parameter instead of specifying it explicitly. <code>locale</code> Specify user locale, for example en-GB, de-DE, etc. Locale will affect navigator.language value, Accept-Language request header value as well as number and date formatting rules. <code>timezone</code> Changes the timezone of the context. See ICU\u2019s metaZones.txt for a list of supported timezone IDs. <code>http-credentials</code> Credentials for HTTP authentication (string containing username and password separated by a colon, e.g. <code>username:password</code>). <code>extra-http-headers</code> Contains additional HTTP headers to be sent with every request. Example: <code>X-API-Key:123456;X-Auth-Token:abcdef</code>."},{"location":"#network-proxy-settings","title":"Network proxy settings","text":"Parameter Description Default <code>proxy-server</code> Proxy to be used for all requests. HTTP and SOCKS proxies are supported, for example http://myproxy.com:3128 or socks5://myproxy.com:3128. Short form myproxy.com:3128 is considered an HTTP proxy. <code>proxy-bypass</code> Optional comma-separated domains to bypass proxy, for example <code>.com, chromium.org, .domain.com</code>. <code>proxy-username</code> Optional username to use if HTTP proxy requires authentication. <code>proxy-password</code> Optional password to use if HTTP proxy requires authentication."},{"location":"#readability-settings","title":"Readability settings","text":"Parameter Description Default <code>max-elems-to-parse</code> The maximum number of elements to parse. The default value is 0, which means no limit. 0 <code>nb-top-candidates</code> The number of top candidates to consider when analysing how tight the competition is among candidates. 5 <code>char-threshold</code> The number of characters an article must have in order to return a result. 500"},{"location":"#response-fields","title":"Response fields","text":"<p>The response to the <code>/api/article</code> request returns a JSON object containing the following fields:</p> Parameter Description Type <code>byline</code> author metadata null or str <code>content</code> HTML string of processed article content null or str <code>dir</code> content direction null or str <code>excerpt</code> article description, or short excerpt from the content null or str <code>fullContent</code> full HTML contents of the page null or str <code>id</code> unique result ID str <code>url</code> page URL after redirects, may not match the query URL str <code>domain</code> page\u2019s registered domain str <code>lang</code> content language null or str <code>length</code> length of extracted article, in characters null or int <code>date</code> date of extracted article in ISO 8601 format str <code>query</code> request parameters object <code>meta</code> social meta tags (open graph, twitter) object <code>resultUri</code> URL of the current result, the data here is always taken from cache str <code>screenshotUri</code> URL of the screenshot of the page null or str <code>siteName</code> name of the site null or str <code>textContent</code> text content of the article, with all the HTML tags removed null or str <code>title</code> article title null or str <code>publishedTime</code> article publication time null or str"},{"location":"#error-handling","title":"Error handling","text":"<p>Error responses follow this structure:</p> <pre><code>{\n  \"detail\": [\n    {\n      \"type\": \"error_type\",\n      \"msg\": \"some message\"\n    }\n  ]\n}\n</code></pre> <p>For detailed error information, consult the Docker container logs.</p>"},{"location":"#get-apilinksurl","title":"GET /api/links?url=\u2026","text":"<p>To collect news article links from website main pages:</p> <pre><code>curl -X GET \"localhost:3000/api/links?url=https://www.cnet.com/\"\n</code></pre>"},{"location":"#link-parser-settings","title":"Link parser settings","text":"Parameter Description Default <code>text-len-threshold</code> The median (middle value) of the link text length in characters. The default value is 40 characters. Hyperlinks must adhere to this criterion to be included in the results. However, this criterion is not a strict threshold value, and some links may ignore it. 40 <code>words-threshold</code> The median (middle value) of the number of words in the link text. The default value is 3 words. Hyperlinks must adhere to this criterion to be included in the results. However, this criterion is not a strict threshold value, and some links may ignore it. 3"},{"location":"#response-fields_1","title":"Response fields","text":"<p>The response to the <code>/api/links</code> request returns a JSON object that contains fields, which are described in the table below.</p> Parameter Description Type <code>fullContent</code> full HTML contents of the page str <code>id</code> unique result ID str <code>url</code> page URL after redirects, may not match the query URL str <code>domain</code> page\u2019s registered domain str <code>date</code> date when the links were collected in ISO 8601 format str <code>query</code> request parameters object <code>meta</code> social meta tags (open graph, twitter) object <code>resultUri</code> URL of the current result, the data here is always taken from cache str <code>screenshotUri</code> URL of the screenshot of the page str <code>links</code> list of collected links list <code>title</code> page title str"},{"location":"#supported-architectures","title":"Supported architectures","text":"<ul> <li>linux/amd64</li> <li>linux/arm64</li> </ul>"},{"location":"#status","title":"Status","text":"<p>The project is under active development and may have breaking changes until <code>v1</code> is released.  As of version <code>v0.17.0</code>, Scrapper is considered production-ready, with multiple installations running in production environments.</p>"},{"location":"#license","title":"License","text":"<p>MIT</p>"}]}